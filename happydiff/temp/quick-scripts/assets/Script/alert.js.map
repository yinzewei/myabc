{"version":3,"sources":["alert.js"],"names":["tipAlert","_alert","_animSpeed","show","tipStr","leftStr","rightStr","callback","cc","loader","loadRes","Prefab","error","prefab","instantiate","director","getScene","addChild","find","getComponent","Label","string","on","event","dismiss","parent","startFadeIn","setScale","opacity","cbFadeIn","callFunc","onFadeInFinish","actionFadeIn","sequence","spawn","fadeTo","scaleTo","runAction","cbFadeOut","onFadeOutFinish","actionFadeOut","onDestroy","removeFromParent","module","exports"],"mappings":";;;;;;AAAA,IAAIA,WAAW;AACXC,YAAQ,IADG,EACa;AACxBC,gBAAY,GAFD,CAEa;AAFb,CAAf;;AAKA;;;;;;AAMA,IAAIC,OAAO,SAAPA,IAAO,CAAUC,MAAV,EAAiBC,OAAjB,EAAyBC,QAAzB,EAAkCC,QAAlC,EAA4C;AACnDC,OAAGC,MAAH,CAAUC,OAAV,CAAkB,UAAlB,EAA6BF,GAAGG,MAAhC,EAAwC,UAAUC,KAAV,EAAiBC,MAAjB,EAAwB;AAC5D,YAAID,KAAJ,EAAU;AACNJ,eAAGI,KAAH,CAASA,KAAT;AACA;AACH;AACDZ,iBAASC,MAAT,GAAkBO,GAAGM,WAAH,CAAeD,MAAf,CAAlB;AACAL,WAAGO,QAAH,CAAYC,QAAZ,GAAuBC,QAAvB,CAAgCjB,SAASC,MAAzC,EAAgD,CAAhD;AACAO,WAAGU,IAAH,CAAQ,0BAAR,EAAoCC,YAApC,CAAiDX,GAAGY,KAApD,EAA2DC,MAA3D,GAAoEjB,MAApE;AACAI,WAAGU,IAAH,CAAQ,0CAAR,EAAoDC,YAApD,CAAiEX,GAAGY,KAApE,EAA2EC,MAA3E,GAAoFhB,OAApF;AACAG,WAAGU,IAAH,CAAQ,4CAAR,EAAsDC,YAAtD,CAAmEX,GAAGY,KAAtE,EAA6EC,MAA7E,GAAsFf,QAAtF;AACA,YAAGC,QAAH,EAAY;AACRC,eAAGU,IAAH,CAAQ,kCAAR,EAA4CI,EAA5C,CAA+C,OAA/C,EAAwD,UAAUC,KAAV,EAAiB;AACrEC;AACAjB,yBAASF,OAAT;AACH,aAHD,EAGG,IAHH;;AAKAG,eAAGU,IAAH,CAAQ,mCAAR,EAA6CI,EAA7C,CAAgD,OAAhD,EAAyD,UAAUC,KAAV,EAAiB;AACtEC;AACAjB,yBAASD,QAAT;AACH,aAHD,EAGG,IAHH;AAIH;AACD;AACAN,iBAASC,MAAT,CAAgBwB,MAAhB,GAAyBjB,GAAGU,IAAH,CAAQ,QAAR,CAAzB;AACA;AACA;AACAQ;AACH,KA1BD;AA2BH,CA5BD;;AA8BA;AACA,IAAIA,cAAc,SAAdA,WAAc,GAAY;AAC1B;AACA1B,aAASC,MAAT,CAAgB0B,QAAhB,CAAyB,CAAzB;AACA3B,aAASC,MAAT,CAAgB2B,OAAhB,GAA0B,CAA1B;AACA,QAAIC,WAAWrB,GAAGsB,QAAH,CAAYC,cAAZ,EAA4B,IAA5B,CAAf;AACA,QAAIC,eAAexB,GAAGyB,QAAH,CAAYzB,GAAG0B,KAAH,CAAS1B,GAAG2B,MAAH,CAAUnC,SAASE,UAAnB,EAA+B,GAA/B,CAAT,EAA8CM,GAAG4B,OAAH,CAAWpC,SAASE,UAApB,EAAgC,GAAhC,CAA9C,CAAZ,EAAiG2B,QAAjG,CAAnB;AACA7B,aAASC,MAAT,CAAgBoC,SAAhB,CAA0BL,YAA1B;AACH,CAPD;;AAUA;AACA,IAAID,iBAAiB,SAAjBA,cAAiB,GAAY,CAChC,CADD;;AAGA;AACA,IAAIP,UAAU,SAAVA,OAAU,GAAY;AACtB,QAAI,CAACxB,SAASC,MAAd,EAAsB;AAClB;AACH;AACD,QAAIqC,YAAY9B,GAAGsB,QAAH,CAAYS,eAAZ,EAA6B,IAA7B,CAAhB;AACA,QAAIC,gBAAgBhC,GAAGyB,QAAH,CAAYzB,GAAG0B,KAAH,CAAS1B,GAAG2B,MAAH,CAAUnC,SAASE,UAAnB,EAA+B,CAA/B,CAAT,EAA4CM,GAAG4B,OAAH,CAAWpC,SAASE,UAApB,EAAgC,GAAhC,CAA5C,CAAZ,EAA+FoC,SAA/F,CAApB;AACAtC,aAASC,MAAT,CAAgBoC,SAAhB,CAA0BG,aAA1B;AACH,CAPD;;AASA;AACA,IAAID,kBAAkB,SAAlBA,eAAkB,GAAY;AAC9BE;AACH,CAFD;;AAIA,IAAIA,YAAY,SAAZA,SAAY,GAAY;AACxB,QAAIzC,SAASC,MAAT,IAAmB,IAAvB,EAA6B;AACzBD,iBAASC,MAAT,CAAgByC,gBAAhB;AACA1C,iBAASC,MAAT,GAAkB,IAAlB;AACH;AAEJ,CAND;;AAQA0C,OAAOC,OAAP,GAAe;AACbzC;AADa,CAAf","file":"alert.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["let tipAlert = {\r\n    _alert: null,           //prefab\r\n    _animSpeed: 0.3,        //弹窗动画速度\r\n};\r\n \r\n/**\r\n * @param tipStr\r\n * @param leftStr\r\n * @param rightStr\r\n * @param callback\r\n */\r\nlet show = function (tipStr,leftStr,rightStr,callback) {\r\n    cc.loader.loadRes(\"tipAlert\",cc.Prefab, function (error, prefab){\r\n        if (error){\r\n            cc.error(error);\r\n            return;\r\n        }\r\n        tipAlert._alert = cc.instantiate(prefab);\r\n        cc.director.getScene().addChild(tipAlert._alert,3);\r\n        cc.find(\"tipAlert/content/top/tip\").getComponent(cc.Label).string = tipStr;\r\n        cc.find(\"tipAlert/content/bottom/left_btn/leftbtn\").getComponent(cc.Label).string = leftStr;\r\n        cc.find(\"tipAlert/content/bottom/right_btn/rightbtn\").getComponent(cc.Label).string = rightStr;\r\n        if(callback){\r\n            cc.find(\"tipAlert/content/bottom/left_btn\").on('click', function (event) {\r\n                dismiss();\r\n                callback(leftStr);\r\n            }, this);\r\n \r\n            cc.find(\"tipAlert/content/bottom/right_btn\").on('click', function (event) {\r\n                dismiss();\r\n                callback(rightStr);\r\n            }, this);\r\n        }\r\n        //设置parent 为当前场景的Canvas ，position跟随父节点\r\n        tipAlert._alert.parent = cc.find(\"Canvas\");\r\n        //tipAlert._alert.setScale(100);\r\n        //tipAlert._alert.scaleTo(1000,1000);\r\n        startFadeIn();\r\n    });\r\n};\r\n \r\n// 执行弹进动画\r\nlet startFadeIn = function () {\r\n    //动画\r\n    tipAlert._alert.setScale(2);\r\n    tipAlert._alert.opacity = 0;\r\n    let cbFadeIn = cc.callFunc(onFadeInFinish, this);\r\n    let actionFadeIn = cc.sequence(cc.spawn(cc.fadeTo(tipAlert._animSpeed, 255), cc.scaleTo(tipAlert._animSpeed, 1.0)), cbFadeIn);\r\n    tipAlert._alert.runAction(actionFadeIn);\r\n};\r\n \r\n \r\n// 弹进动画完成回调\r\nlet onFadeInFinish = function () {\r\n};\r\n \r\n// 执行弹出动画\r\nlet dismiss = function () {\r\n    if (!tipAlert._alert) {\r\n        return;\r\n    }\r\n    let cbFadeOut = cc.callFunc(onFadeOutFinish, this);\r\n    let actionFadeOut = cc.sequence(cc.spawn(cc.fadeTo(tipAlert._animSpeed, 0), cc.scaleTo(tipAlert._animSpeed, 2.0)), cbFadeOut);\r\n    tipAlert._alert.runAction(actionFadeOut);\r\n};\r\n \r\n// 弹出动画完成回调\r\nlet onFadeOutFinish = function () {\r\n    onDestroy();\r\n};\r\n \r\nlet onDestroy = function () {\r\n    if (tipAlert._alert != null) {\r\n        tipAlert._alert.removeFromParent();\r\n        tipAlert._alert = null;\r\n    }\r\n\r\n};\r\n \r\nmodule.exports={\r\n  show\r\n};\r\n"]}